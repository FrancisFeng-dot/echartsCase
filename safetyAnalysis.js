//定义顶部列表var table;$(document).ready(		function() {						$("#temp_urls").val(urls);			$("#temp_nowSelectId").val("select");			$("#deptId").val(parDeptId);			var query_dept = {				deptId : parDeptId,				fieldtext : "deptName",				fieldValue : "deptId"			} ;			//下拉框ID、条件、div的ID、用来输出选中的下拉框值、回调方法			var sl = $.initSelect.initFirstSelect('select', query_dept,'SelectBox1', 'deptId',callback);								//机构概况 信息			findDeptDetail();			//驾驶行为排名			drivingRank(1,'dept');			//加载 危险驾驶行为机构热点图			loadDangerousDrivingBehavior();						//加载  驾驶行为占比 - 类型占比 饼状图			loadDrivingBehaviorAccounted();						//初始化地图热点			getMap();							//初始化底部列表分页			var grid = $.grid.init('grid_behavior', 'drivingBehaviorListService', orgGridRenderer);			//绑定底部列表切换事件			$("#behaviorList").click(function(){					query();			});			$("#behaviorChart").click(function(){					//加载 危险驾驶行为机构热点图				loadDangerousDrivingBehavior();								//加载  驾驶行为占比 - 类型占比 饼状图				loadDrivingBehaviorAccounted();			});			//排序列表//			behaviorSortList();						//驾驶行为选择器			jQuery(".behaviorType").find(".radio").bind("click", function () {				$(this).addClass("acur").siblings().removeClass("acur");				var radio_val = $("input[name='tab'][type='radio']:checked").val();				$("#typeAlarm").val(radio_val);				//地图热点				getMapJson(null,null,2);			});						//详细数据点击事件			$("#moreDetail").click(function(){				var deptId = $("#deptId").val();				var queryDay = $("#queryDay").val();				var findTypeAlarm = $("#findTypeAlarm").val();								var url = $(this).attr("rel_url")+"?deptId="+deptId+"&queryDay="+queryDay+"&findTypeAlarm="+findTypeAlarm;				//window.location.href = url;				openTab('驾驶行为统计',url);					});});//选中机构下拉宽后  回调方法function callback(data,selValue){	$("#temp_nowSelectId").val(this.nowSelectId);		if ( (data == null || data.length == 0) && selValue != '-1' ){				var rel_url = ctx+ '/topicAnalysis/safetyAnalysis/safetyAnalysisInfo.do';		window.location.href=rel_url+"?deptId="+$("#deptId").val()+"&queryDay="+$("#queryDay").val()+"&typeAlarm="+$("#typeAlarm").val();	}else{				var tab_id = $("#alarmTabId").val();		var findTypeAlarm = $("#findTypeAlarm").val();		//机构概况信息//		findDeptDetail();		//地图热点		getMapJson(null,null,2);	}	}//初始化 chart数据 var container2 = null;var container3 = null;//暂存比例图数据var container2Categories = null;var container3Categories = null;//暂存分析图数据var container2Data = null;var container3Data = null;//---------------------------危险驾驶行为机构热点图 START-------------------------------------------//危险驾驶行为机构热点图 function loadDangerousDrivingBehavior(){	//初始化 危险驾驶行为趋势图	$('#container2').highcharts({			chart : {				type : 'line'			},			title : {				text : '',				y:6,			},			xAxis : {				categories : [],				labels : {					rotation : -45,					align : 'right',					style : {						fontSize : '12px',						fontFamily : 'Verdana, sans-serif'					}				}			},			yAxis : {				min:0, // 定义最小值  				title : {					text : '次'				}			},			tooltip : {				valueSuffix : '次'			},			series : []	});	container2 = $('#container2').highcharts();	//加载图表数据	loadChartData();}//对图表加载数据function loadChartData() {	var queryDay = $("#queryDay").val();	var typeAlarm = $("#typeAlarm").val();	var deptId = $("#deptId").val();			$.ajax({		"type" : 'post',		"url" : ctx+ '/topicAnalysis/safetyAnalysis/dangerousDrivingBehavior.do',		"dataType" : "json",		"data" : {			deptId : deptId,			queryDay : queryDay,			typeAlarm : typeAlarm		},		"success" : function(resp) {			container2Categories = resp["container2"]["categories"];			container2Data = resp["container2"]["data"];			createChart();					}	});}//构造图表function createChart() {	if (typeof (container2Data) != "undefined") {		container2.setTitle( {text: '危险驾驶行为趋势图' });		//更新趋势图数据		var feeTendencySeries = eval(container2Data);		if(container2 != null){			clearChart(container2);		}		if(feeTendencySeries != 'undefined' && feeTendencySeries != null && feeTendencySeries != ''){			$.each(feeTendencySeries, function(n, value) {				container2.addSeries(value, false);			});		}		container2.xAxis[0].setCategories(eval(container2Categories),true);	}else{		container2.setTitle( {text: '暂无数据' });	}}//构造图表function createDBAChart() {	if (container3Data == null){		container3.setTitle( {text: '暂无数据' });	}else if ( container3Data.length > 2 ) {		container3.setTitle( {text: '危险驾驶行为占比' });		var feePiedata = eval(container3Data);		//更新饼图数据		container3.series[0].update({			data : feePiedata		});	}else{		container3.setTitle( {text: '暂无数据' });	}}//---------------------------危险驾驶行为机构热点图  END-------------------------------------------//--------------------------- 危险驾驶行为占比图  STAST-------------------------------------------// 危险驾驶行为占比图function loadDrivingBehaviorAccounted(){	//初始化 危险驾驶行为占比图	$('#container3').highcharts({		chart : {			plotBackgroundColor : null,			plotBorderWidth : null,			plotShadow : false		},		title : {			text : '',			y:6,		},		tooltip : {			pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'		},		plotOptions : {			pie : {				allowPointSelect : true,				cursor : 'pointer',				dataLabels : {					enabled : true,					color : '#000000',					connectorColor : '#000000',					format : '<b>{point.name}</b>: {point.percentage:.1f} %'				}			}		},		series : [ {			type : 'pie',			name : '所占比例',			data : []		} ]	});	container3 = $('#container3').highcharts();	//加载图表数据	loadDBAChartData();}//对图表加载数据 - 危险驾驶行为占比图function loadDBAChartData() {	var queryDay = $("#queryDay").val();	var typeAlarm = $("#typeAlarm").val();	var deptId = $("#deptId").val();	var accounted = $("#accounted").val();		$.ajax({		"type" : 'post',		"url" : ctx+ '/topicAnalysis/safetyAnalysis/drivingBehaviorAccounted.do',		"dataType" : "json",		"data" : {			deptId : deptId,			queryDay : queryDay,			typeAlarm : typeAlarm,			accounted : accounted		},		"success" : function(resp) {			//console.log(eval(resp.pie)[0][1]);			var objArr = eval(resp.pie);//joson对象转数组			container3Data = null;			for(var i=1;i<objArr.length;i++){				if(objArr[i][1]>0){					container3Data = resp["pie"];					break;					}			}			/*container3Data = resp["pie"];*/			createDBAChart();		}	});}//--------------------------- 危险驾驶行为占比图 END-------------------------------------------//----------------------------地图热点图 start------------------------------------------------//定义地图var BMapExt;var myChart;function getMap(){		require.config({        paths: {            echarts: '../../js/map/doc/example/www/js'        },        packages: [            {                name: 'BMap',                location: '../../js/map/extension/BMap/src',                main: 'main'            }        ]    });    require(    [        'echarts',        'BMap',        'echarts/chart/map'    ],    function (echarts, BMapExtension) {        $('#main').css({            height:$('#main').parent().height(),            width: $('#main').parent().width()        });                var url = $("#mapFrom").attr("action");        var days = $("#queryDay").val();    	var typeAlarm = $("#typeAlarm").val();    	var deptId = parDeptId;        $.ajax({            type: "POST",            url: url,            data: {deptId:deptId,days:days,typeAlarm:typeAlarm},            dataType: "json",            success: function(data){            	// 初始化地图            	BMapExt = new BMapExtension($('#main')[0], BMap, echarts,{            	    enableMapClick: false            	});            	var map = BMapExt.getMap();            	var container = BMapExt.getEchartsContainer();            	var locations = [];        		$.each(data.son,function(key,values){        			locations.push(values);        		});        		var point = new BMap.Point(locations[0][0], locations[0][1]);            	map.centerAndZoom(point, 8);            	map.enableScrollWheelZoom(true);            	// 地图自定义样式	          	  // 创建一个DOM元素	          	  var divText = document.createElement("div");		          // 添加文字说明		          divText.appendChild(document.createTextNode("驾驶行为热点分布"));		          // 设置样式		          divText.style.cursor = "pointer";		          divText.style.border = "1px solid gray";		          divText.style.backgroundColor = "white";		          divText.style.position = "absolute";		          divText.style.right = "5px";		          divText.style.top = "5px";		          divText.style.fontSize="15px";		          divText.style.padding="3px";		          map.getContainer().appendChild(divText);            	option = {            	    color: ['gold','aqua','lime'],            	    title : {            	        text: '',            	        subtext:'',            	        x:'right'            	    },            	    tooltip : {            	        trigger: 'item',            	        formatter: function (v) {            	            if(typeof (v[1]) != 'undefined'){            	            	return v[1]+v[2]+'次';              	        	}else{              	        		return null;              	        	}            	        }            	    },                    	    toolbox: {            	        show : false            	    },            	    dataRange: {            	        min : 0,            	        max : data.max,            	        y: '60%',            	        calculable : true,            	        color: ['#ff3333', 'orange', 'yellow','lime','aqua']            	    },            	    series : [            	        {            	            name:'子集',            	            type:'map',            	            mapType: 'none',            	            data:[],                        	            geoCoord: data.son,            				markLine : {            	                smooth:true,            	                effect : {            	                    show: true,            	                    scaleSize: 1,            	                    period: 30,            	                    color: '#fff',            	                    shadowBlur: 10            	                },            	                itemStyle : {            	                    normal: {            	                        borderWidth:1,            	                        lineStyle: {            	                            type: 'solid',            	                            shadowBlur: 10            	                        }            	                    }            	                },            	                data : [            	                ]            	            },            	            markPoint : {            	                symbol:'emptyCircle',            	                symbolSize : function (v){            	                    return 10 + v/10            	                },            	                effect : {            	                    show: true,            	                    shadowBlur : 0            	                },            	                itemStyle:{            	                    normal:{            	                        label:{show:false}            	                    }            	                },            	                data : data.num            	            }            	                        	        }            	    ]            	};            	if (myChart&& myChart.dispose) {            	    myChart.dispose();            	}            	myChart = BMapExt.initECharts(container);            	//绑定点击事件            	var ecConfig = require('echarts/config');            	function eConsole(param) {            		//var str = param.name + ":" + param.value;            		//地图钻取            		getMapJson(null,param.name);            	}            	myChart.on(ecConfig.EVENT.CLICK, eConsole);            	window.onresize = myChart.resize;            	BMapExt.setOption(option, true);            }        });    }    );}//获取MapJson数据function getMapJson(deptId,deptName,sel){	if(!deptId){		deptId = $("#deptId").val();	}	if(!sel){		sel = 1;	}	var url = $("#mapFrom").attr("action");    var days = $("#queryDay").val();	var typeAlarm = $("#typeAlarm").val();	$("#temp_nowSelectId").val(this.nowSelectId);	$("#temp_urls").val(this.urls);	    $.ajax({        type: "POST",        url: url,        data: {deptId:deptId,days:days,typeAlarm:typeAlarm,deptName:deptName},        dataType: "json",        success: function(data){        	        	        	if(data.error){        		//错误情况：被选择机构下无下属机构或车辆        		alertMessage(data.error);        	}else{        		//修改机构ID值            	if(data.deptId){            		$("#deptId").val(data.deptId+"");            	}            	//判断是否为底层机构            	if(data.isLast){            		//底层机构则跳转至详情页面            		var url = $("#query_behavior").attr("last_url");            		window.location.href=url+"?deptId="+data.deptId+"&queryDay="+$("#queryDay").val()+"&typeAlarm="+typeAlarm;            	}else{            		var a_ption = myChart.getOption();        			            		var  seriesList = a_ption.series;            		            		var  dataRange = a_ption.dataRange;            		            		seriesList[0].geoCoord = data.son;            		            		seriesList[0].markPoint.data = data.num;            		            		dataRange.max = data.max;            				            		a_ption.series = seriesList;            		            		a_ption.dataRange = dataRange;            		            		BMapExt.setOption(a_ption, true);            		            		var map = BMapExt.getMap();            		var locations = [];            		$.each(data.son,function(key,values){            			locations.push(values);            		});            		var point = new BMap.Point(locations[0][0], locations[0][1]);                	map.centerAndZoom(point, 8);               	            		            		//机构详情            		findDeptDetail();            		            		//地图右边排名            		$(".drivingRank").find("li").each(function(){            			if($(this).attr("class")=='active'){            				$(this).find("a").click();            			}            		});	            		            		            		//底部列表            		if($("#behaviorList").parent().attr("class")=='active'){            			$("#behaviorList").click();            		}else{            			//联动下面危险驾驶行为趋势图 ，驾驶行为占比                		loadDangerousDrivingBehavior();//危险驾驶行为机构热点图           		                		loadDrivingBehaviorAccounted();//危险驾驶行为占比图              		            		}		            		if(1 == sel){            			var nowSelectId = $("#temp_nowSelectId").val();            			var urls = $("#temp_urls").val();                		jsSelectItemByValue(nowSelectId,data.deptId);                		                		var query_dept = {                				deptId : data.deptId,                				fieldtext : "deptName",                				fieldValue : "deptId"                			} ;                		$.initSelect.ajaxNextSelect(urls, nowSelectId ,data.deptId, query_dept, 'SelectBox1',0);            		}            		            		            	}    	        	}        	        }    });    }//----------------------------地图热点图 end--------------------------------------------------//----------------------------底部列表查询方法 start-------------------------------------------------function query(pageStart,deptId,isLast) {		//如果为底层机构则跳转至底层机构详情页面	if(isLast&&isLast==1){		var url = $("#query_behavior").attr("last_url");		window.location.href=url+"?deptId="+deptId+"&queryDay="+$("#queryDay").val();	}else{		var query = serializeArrayByForm('query_behavior');		if(isNotNull(pageStart)){			query['new_page_start'] = pageStart;		}		if(isNotNull(deptId) && deptId != 'root'){			query['deptId'] = deptId;		}else{			query['deptId'] = $("#deptId").val();		}		var queryDay = $("#queryDay").val();		var typeAlarm = $("#typeAlarm").val();		query['queryDay'] = queryDay;		query['typeAlarm'] = typeAlarm;		$('#grid_behavior').trigger('grid.query', [ query ]);		//自动排序		//$("#grid_behavior").tablesorter(); 	}	}//excle导出function exportExcle(){	var deptId = $("#deptId").val();	var theads=$('#grid_behavior thead tr th');//获取所有的表头	var thead = "";	for ( var i = 0; i < theads.length; i++) {		thead = thead+$(theads[i]).html()+",";	}	var queryDay = $("#queryDay").val();	thead = encodeURI(thead);	thead = encodeURI(thead);	window.location.href=ctx+'/topicAnalysis/safetyAnalysis/exportExcle.do?deptId='+deptId+'&thead='+thead+'&queryDay='+queryDay;}function orgGridRenderer(data, idx) {	var trCfg = {		tdList : [			{text : data.rowNo},			{text : '<a href="javascript:void(0)" onclick="getMapJson(null,'+"'"+data.deptName+"'"+');">'+data.deptName+'</a>'},			{text : data.totalVehicle},			{text : data.mileageTotal},			{text : data.driverTimeTotal},			{text : data.sharpTimes},			{text : data.slideTimes},			{text : data.overSpeedTimes}		]	}; 	return trCfg;}//----------------------------底部列表展示 end---------------------------------------------------//{text : '<a href="javascript:void(0)" onclick="query('+null+','+"'"+data.deptId+"'"+','+data.isLast+');">'+data.deptName+'</a>'},//----------------------------------------------------------------//日期查询选择器function selDate(num){	var tab_id = $("#alarmTabId").val();	var findTypeAlarm = $("#findTypeAlarm").val();		if(null == num || "" == num || 0 == num){		num = 7;	}	$("#queryDay").val(num);	 	//地图热点	getMapJson(null,null,2);	//底部列表	if($("#behaviorList").parent().attr("class")=='active'){		$("#behaviorList").click();	}	}//驾驶行为占比选择器function selAccounted(num){	if(null == num || "" == num || 0 == num){		num = 1;	}	$("#accounted").val(num);		//重新刷类型或机构饼状图	loadDrivingBehaviorAccounted();}//--------------------------- 机构概况信息 start-------------------------------------------function findDeptDetail(){	var deptId = $("#deptId").val();	var queryDay = $("#queryDay").val();	$.ajax({		"type" : 'post',		"url" : ctx+ '/topicAnalysis/safetyAnalysis/findDeptDetail.do',		"dataType" : "json",		"data" : {			deptId : deptId,			num : queryDay		},		"success" : function(deptInfo) {			if (typeof (deptInfo) != "undefined") {				$("#VEHICLE_NUMS").html(deptInfo["VEHICLE_NUMS"]);				$("#DRIVER_NUMS").html(deptInfo["DRIVER_NUMS"]);				$("#FAULT_VEHICLE_NUMS").html(deptInfo["FAULT_VEHICLE_NUMS"]);				$("#MILEAGE_TOTAL").html(deptInfo["MILEAGE_TOTAL"]);				$("#DRIVER_TIME_TOTAL").html(deptInfo["DRIVER_TIME_TOTAL"]);			}		}	});}//--------------------------- 机构概况信息 END-------------------------------------------//---------------------------------驾驶行为排名 tab页切换 START----------------------------------------function drivingRank(v,findType) {  	$("#alarmTabId").val(v);	$("#findTypeAlarm").val(findType);	var divs = document.getElementsByClassName("tab_css");      var divId = "tab" + v + "_content";    var typeAlarm = $("#typeAlarm").val();        if(typeAlarm == 'allAlarm'){    	document.getElementById('drivingRankName').innerHTML = '危险驾驶行为排名';    }else if(typeAlarm == 'threeSharp'){    	document.getElementById('drivingRankName').innerHTML = '三急排名';    }else if(typeAlarm == 'slideAlarm'){    	document.getElementById('drivingRankName').innerHTML = '空档滑行排名';    }else{    	document.getElementById('drivingRankName').innerHTML = '超速排名';    }        findAlarmOrderDate(findType,divId);        for(var i = 0; i < divs.length; i++) {          var divv = divs[i];          if(divv == document.getElementById("tab" + v + "_content")) {              divv.style.display = "block";          } else {              divv.style.display = "none";          }      }  };//拿到告警排序数据function findAlarmOrderDate(findType,divId){	var deptId = $("#deptId").val();	var queryDay = $("#queryDay").val();	var typeAlarm = $("#typeAlarm").val();	$.ajax({		"type" : 'post',		"url" : ctx+ '/topicAnalysis/safetyAnalysis/findAlarmOrder.do',		"dataType" : "json",		"data" : {			deptId : deptId,			num : queryDay,			typeAlarm : typeAlarm,			findType : findType		},		"success" : function(deptInfo) {			$("#"+divId+" ul").remove();			$("#"+divId).append(' <ul class="list" style="height:332px; padding:0 !important;"> </ul>');			if(findType == "dept"){				$("#"+divId+" ul").append('<li class="name"><span class="w1 color1">排名</span><span class="w1 color1">机构</span><span class="w1 color1">次/车/日</span></li>');				if (typeof (deptInfo) != "undefined") {					if ( deptInfo  != '') {						for (var i = 0; i <= deptInfo.length - 1; i++) {							var cs = "'"+findType+"'"+",'"+divId+"','"+deptInfo[i]["DEPT_ID"]+"'";							$("#"+divId+" ul").append('<li><span class="w1">'+(i+1)+'</span> <span class="w1"><a href="#" title="'+deptInfo[i]["DEPT_NAME"]+'" onClick="findDeptAlarmOrderDate('+cs+')">'+deptInfo[i]["DEPT_NAME"]+'</a> </span> <span class="w1">'+deptInfo[i]["TIMES_ALARM"]+'</span></li>');						}					}else{						$("#"+divId+" ul").append('<li style="text-align:center;"><span class="w8" style="float: none;">暂无数据</span></li>');					}				}			}			if(findType == "vehicle"){				$("#"+divId+" ul").append('<li class="name"><span class="w2 color1">排名</span><span class="w2 color1">车牌</span><span class="w2 color1">里程(km)</span><span class="w2 color1">点火时长(h)</span><span class="w2 color1">次/日</span></li>');				if (typeof (deptInfo) != "undefined") {					if ( deptInfo  != '') {						for (var i = 0; i <= deptInfo.length - 1; i++) {							var str = "'"+deptInfo[i]["VEHICLE_ID"]+"'";							$("#"+divId+" ul").append('<li><span class="w2">'+(i+1)+'</span> <span class="w2"><a href="#" title="'+deptInfo[i]["VEHICLE_CODE"]+'" onClick="findCarTrajectory('+str+')">'+deptInfo[i]["VEHICLE_CODE"]+'</a> </span> <span class="w2">'+deptInfo[i]["MILEAGE"]+'</span> <span class="w2">'									+deptInfo[i]["DRIVER_TIME"]+'</span><span class="w2">'+deptInfo[i]["TIMES_ALARM"]+'</span></li>');						}					}else{						$("#"+divId+" ul").append('<li style="text-align:center;"><span class="w8" style="float: none;">暂无数据</span></li>');					}				}							}			if(findType == "driver"){				$("#"+divId+" ul").append('<li class="name"><span class="w2 color1">排名</span><span class="w2 color1">司机</span><span class="w2 color1">里程(km)</span><span class="w2 color1">出勤时长(h)</span><span class="w2 color1">次/日</span></li>');				if (typeof (deptInfo) != "undefined") {					if ( deptInfo  != '') {					for (var i = 0; i <= deptInfo.length - 1; i++) {						var str = "'"+deptInfo[i]["DRIVER_ID"]+"'";						$("#"+divId+" ul").append('<li><span class="w2">'+(i+1)+'</span> <span class="w2"><a href="#" title="'+deptInfo[i]["DRIVER_NAME"]+'" onClick="findDriverTrajectory('+str+')">'+deptInfo[i]["DRIVER_NAME"]+'</a> </span> <span class="w2">'+deptInfo[i]["MILEAGE"]+'</span> <span class="w2">'								+deptInfo[i]["DRIVER_TIME"]+'</span><span class="w2">'+deptInfo[i]["TIMES_ALARM"]+'</span></li>');					} 					}else{						$("#"+divId+" ul").append('<li style="text-align:center;"><span class="w8" style="float: none;">暂无数据</span></li>');					}				}			}		}	});}//跳转至行车轨迹function findCarTrajectory(vehicelId){	var rel_url = ctx+ '/resourcesManage/drivingReport/index.do';	openTab('行车报告',rel_url+"?vehicleId="+vehicelId);}//跳转至驾驶员轨迹 function findDriverTrajectory(driverId){	var rel_url = ctx+ '/resourcesManage/driverDrivingReport/index.do';	openTab('驾驶报告',rel_url+"?driverId="+driverId+"&operation=view");}function openTab(name,url){	window.parent.$.fn.jerichoTab.addTab({         tabFirer: null,         title: name,         closeable: true,         data: {             dataType: 'iframe',             dataLink: url         }     }).showLoader().loadData();     resizeTab();}//点击机构查询机构下告警信息function findDeptAlarmOrderDate(findType,divId,deptId){	$("#deptId").val(deptId);	if(findDeptDetailInfo() == 1 ){		var rel_url = ctx+ '/topicAnalysis/safetyAnalysis/safetyAnalysisInfo.do';		window.location.href=rel_url+"?deptId="+$("#deptId").val()+"&queryDay="+$("#queryDay").val()+"&typeAlarm="+$("#typeAlarm").val();	}else{		//机构概况信息//		findDeptDetail();		//驾驶行为排名//		findAlarmOrderDate(findType,divId);		//地图热点		getMapJson();	}  } //拿到机构信息function findDeptDetailInfo(){	var deptId = $("#deptId").val(); 	var isLast ; 	$.ajax({		"type" : 'post',		"url" : ctx+ '/topicAnalysis/safetyAnalysis/findDeptInfo.do',		"dataType" : "json",		"async" : false,  		"data" : {			deptId : deptId		},		"success" : function(deptInfo) {			if (typeof (deptInfo) != "undefined") {				 isLast = deptInfo.isLast ;			}		}	});	return isLast;}  //---------------------------------驾驶行为排名 tab页切换 END----------------------------------------//---------------------------------底部列表增加自动排序-----------------------------------------------function behaviorSortList(){	var deptId = $("#deptId").val();	var queryDay = $("#queryDay").val();	var typeAlarm = $("#typeAlarm").val();		var sortColumn = "deptId";	var sortType = "asc";		table = $('#grid_behavior')	.DataTable(			{				"oLanguage" : { // 汉化					"sProcessing" : "正在加载数据...",					"sLengthMenu" : "显示_MENU_条 ",					"sZeroRecords" : "没有您要搜索的内容",					"sInfo" : "从_START_ 到 _END_ 条记录    总记录数为 _TOTAL_ 条",					"sInfoEmpty" : "记录数为0",					"sInfoFiltered" : "(全部记录数 _MAX_ 条)",					"sInfoPostFix" : "",					"sSearch" : "搜索",					"sUrl" : "",					"oPaginate" : {						"sFirst" : "首页",						"sPrevious" : "上一页 ",						"sNext" : " 下一页 ",						"sLast" : " 尾页 "					}				},				"searching" : false,//搜索按钮				"bJQueryUI" : true,				"bPaginate" : true,// 分页按钮				"bFilter" : true,// 搜索栏				"bLengthChange" : true,// 每行显示记录数				"iDisplayLength" : 10,// 每页显示行数				"bInfo" : true,// Showing 1 to 10 of 23 entries 总记录数没也显示多少等信息				"bWidth" : true,				"bSort" : true,				"bScrollCollapse" : true,				"sPaginationType" : "full_numbers", // 分页，一共两种样式 另一种为two_button // 是datatables默认				"bProcessing" : true,				"bServerSide" : true,				"bDestroy" : true,				"sScrollX": "2000px",				"sAjaxSource" : ctx						+ '/topicAnalysis/safetyAnalysis/loadBehaviorListData.do',				"fnServerData" : function(sSource,						aoData, fnCallback) {					$.ajax({								"type" : 'post',								"url" : sSource,								"dataType" : "json",								"data" : {									aoData : JSON											.stringify(aoData),									deptId : deptId,									queryDay : queryDay,									typeAlarm : typeAlarm								},								"success" : function(										resp) {									sortColumn = resp["sortColumn"];									sortType = resp["sortType"];									fnCallback(resp);									 $("#aoData").val(JSON.stringify(aoData));							 								}							});				},				"aoColumnDefs" : [ {					sDefaultContent : '',					aTargets : [ '_all' ]				} ],				"aoColumns" : [ {					"mData" : "rownum_"				}, {					"mData" : "deptName"				}, {					"mData" : "totalVehicle"				}, {					"mData" : "mileageTotal"				},{					"mData" : "driverTimeTotal"				},  {					"mData" : "sharpTimes"				}, {					"mData" : "slideTimes"				}, {					"mData" : "overSpeedTimes"				}],				"order" : [ [ '1', 'asc' ] ]			});}//---------------------------------底部列表增加自动排序 end-----------------------------------------------//'<a href="javascript:void(0)" onclick="getMapJson('+"'"+deptId+"'"+');">'+deptName+'</a>'