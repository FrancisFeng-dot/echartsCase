<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%><!DOCTYPE html><html lang="en"><head>    <%@include file="/commons/common.jsp"%>    <%@include file="/frame/frame_include.jsp"%>    <meta charset="UTF-8">    <script type="text/javascript" src="${ctx}/js/statistics/alarmRadar/index.js?v=${rv}"></script>    <title>chart</title>    <style>        /*.container{            width: 100%;            min-height: 100%;            position: relative;            margin: 0 auto;        }        .chart-group{            position: relative;            width: 48%;            float: left;        }        .chart-group2{            width: 98.4%;        }        .chart{            /*width: 45%;*/         /*   height: calc(100vh * 0.3);        }        .chart>div{            background-color: #f3f3f3;            border-radius: 4px;        }        .chart-group2 .chart{            width: 100%;            height: calc(100vh * 0.53);        }        .marginLeft40{            margin-left: 40px;        }        .tit{            line-height: 40px;        }*/        .dataanabody{            background: #efefef;            width: 100vw;            height: 100vh;            margin: 0;            color:#333333;            font-size:0.8em;            display: flex;            flex-direction: column;            justify-content: center;            align-items: center;            box-sizing: border-box;font-family: PingFangSC-Regular;        }        .data_top{            width: 96vw;            position: relative;            display: flex;            flex-direction: row;            justify-content: center;            align-items: center;        }        .data_center{            width: 96vw;            height: 38vh;            position:relative;            background: #ffffff;                        border-radius: 4px;margin: 2vh 0;        }        .data_bottom{            width:96vw;            position:relative;        }        .carlist {            margin:  0 auto;            width: 100%;            height: 20px;            position:  relative;            display:  flex;            flex-direction:  row;            justify-content: flex-start;            align-items:  center;            margin-top:2vh;        }        .carlist>div{            height: 20px;            background: #8EB12D;            width: 4px;            margin-left: 32px;            border-radius:  2px;        }        .carlist>span{            height: 20px;            font-family: Roboto-Bold;            font-size: 18px;            color: #555555;            margin-left: 12px;            line-height: 20px;font-weight:600;        }        .car-status{            display: flex;            flex-direction: row;            justify-content: space-around;            margin: 0;            text-align: center;            list-style: none;    padding: 1vh 1vw;width: 39vw;        }        .car-status>li{            cursor: pointer;            padding: 1vh 0;            color: #7C8775;            position: relative;            display: flex;            width: 12vw;            border-radius: 4px;            flex-direction: column;            justify-content: space-around;            align-items: center;            background: #F5F5F5;            border: 1px solid #EEEEEE;        }        .car-status>li>small{            font-size: 1.3em;    height: 2.4vw;    display: flex;    flex-direction: row;    justify-content: center;    align-items: center;        }        .car-status>li>span{            font-weight:600;            font-size: 2.4em;font-family: Roboto-BoldCondensed;color: #555555;        }        .recentmonth{            margin: 0;            padding: 0;display: flex;            flex-direction: row;            justify-content: center;            align-items: center;        }        .recentmonth>li{            list-style:none;            color:#999999;            font-size:1.2em;            cursor:pointer;margin-right: 1vw;            height: 4vh;            line-height: 4vh;            box-sizing: border-box;        }        .recentmonth>li:hover,.recentmonth .active{            border-bottom: 2px solid #A4C69F;font-family: Roboto-Bold;color: #555555;font-weight:600;        }        .allmonth{            margin: 0;            padding: 0;            display: flex;            flex-direction: row;            justify-content: space-between;            align-items: center;            flex-wrap: wrap;        }        .allmonth>li{            list-style:none;            display: flex;            flex-direction: row;            justify-content: space-between;            align-items: center;            width: 11vw;            height: 10vh;            margin-bottom: 1vh;            padding: 0 1vw;            background-image:url(${ctx}/img/monthborder.png);            background-size: 100% 100%;            box-sizing: border-box;        }        .allmonth>li>div{            display: flex;            flex-direction: column;            justify-content: center;            align-items: center;        }          .allmonth>li>div>span:nth-child(1){            color: #999999;            font-size:0.8em;        }          .allmonth>li>div>span:nth-child(2){            color: #888888;            font-size:1.6em;        }          .allmonth>li>span{            color: #A5C5A0;            font-size:1.6em;        }     </style></head><body class="dataanabody">    <div class="data_top">        <div style="background: #ffffff;border-radius: 4px;margin-right: 1vw;">            <div class="carlist"><div></div><span>总览</span></div>            <ul class="car-status" style="width: 52vw;">                <li id="li_total_car_num">                    <small>总车辆</small>                    <span id="span_total_car_num"></span>                </li>                <li>                    <small>在线车辆</small>                    <span id="span_online_car_num"></span>                </li>                <li id="li_driver_num">                    <small>驾驶员</small>                    <span id="span_driver_num"></span>                </li>                <li id="li_today_alarm_count">                    <small>今日告警</small>                    <span id="span_today_alarm_count"></span>                </li>                <!-- <li style="background: url('${ctx}/img/allcar.png') no-repeat;background-size: 100% 100%;" id="li_total_car_num">                    <small>总车辆</small>                    <span id="span_total_car_num"></span>                </li>                <li style="background: url('${ctx}/img/onlinecar.png') no-repeat;background-size: 100% 100%;">                    <small>在线车辆</small>                    <span id="span_online_car_num"></span>                </li>                <li style="background: url('${ctx}/img/driver.png') no-repeat;background-size: 100% 100%;" id="li_driver_num">                    <small>驾驶员</small>                    <span id="span_driver_num"></span>                </li>                <li style="background: url('${ctx}/img/todayreport.png') no-repeat;background-size: 100% 100%;" id="li_today_alarm_count">                    <small>今日告警</small>                    <span id="span_today_alarm_count"></span>                </li> -->            </ul>        </div>        <div style="background: #ffffff;border-radius: 4px;">            <div class="carlist"><div></div><span>任务提醒</span></div>            <ul class="car-status">                <li id="div_pending_alarm">                    <small>等待处理的告警数</small>                    <span id="span_pending_alarm_count"></span>                </li>                <li id="div_license_expiration">                    <small>即将过期的驾驶证</small>                    <span id="span_license_expiration_count"></span>                </li>                <li id="div_need_me_handle_alarm">                    <small>需要我处理的告警数</small>                    <span id="span_need_me_handle_alarm_count"></span>                </li>            </ul>                <!-- <div class="handlereport" id="div_pending_alarm">                    <img src="${ctx}/img/needhandle.png" alt="">                    <div>                        <span>等待处理的告警数</span>                        <span style="font-size: 1.2em;color: #555555;font-weight: 600;" id="span_pending_alarm_count"></span>                    </div>                </div>                <div class="handlereport" id="div_license_expiration">                    <img src="${ctx}/img/needmehandle.png" alt="">                    <div>                        <span>即将过期的驾驶证</span>                        <span style="font-size: 1.2em;color: #555555;font-weight: 600;" id="span_license_expiration_count"></span>                    </div>                </div>                <div class="handlereport" id="div_need_me_handle_alarm">                    <img src="${ctx}/img/needmehandle.png" alt="">                    <div>                        <span>需要我处理的告警数</span>                        <span style="font-size: 1.2em;color: #555555;font-weight: 600;" id="span_need_me_handle_alarm_count"></span>                    </div>                </div> -->            </div>        </div>    </div>    <div class="data_center">        <div class="carlist"><div></div><span>告警趋势</span></div>        <div style="height: 5vh;position: absolute;top: 30px;right: 0;left: 0;z-index: 1;">            <ul class="recentmonth">                <li class="active" num="3">最近3个月</li>                <li num="6">最近6个月</li>                <li num="9">最近9个月</li>                <li num="12" style="margin-right: 25vw;">最近12个月</li>            </ul>        </div>        <div id="alarmtrend" style="height: 32vh;"></div>        <img src="${ctx}/img/firstloading.gif" alt="" style="position: absolute;top: 0;left: 29vw;bottom:0;margin:auto;display: none;">    </div>    <div class="data_bottom">        <div style="float: left;background: #ffffff;border-radius: 4px;">            <div class="carlist"><div></div><span>近一周告警产生情况</span></div>            <div id="rencentweekreport" style="width: 73vw;height: 31vh;"></div>        </div>        <div style="float: left;background: #ffffff;margin-left: 1vw;border-radius: 4px;">            <div class="carlist" style="width:22vw;"><div></div><span>近一周告警TOP5排行</span></div>            <div id="rencentweektop5" style="width: 22vw;height: 31vh;"></div>        </div>    </div></body><!-- <div class="container">    <div class="chart-group">        <div class="tit">车辆信息</div>        <div class="chart" id="chart1"></div>    </div>    <div class="chart-group marginLeft40">        <div class="tit">司机信息</div>        <div class="chart" id="chart2"></div>    </div>    <div class="chart-group chart-group2">        <div class="tit">告警数据分析</div>        <div class="chart" id="chart3"></div>    </div></div> --><script src="${ctx}/js/echarts/echarts-all.js?v=${rv}"></script><script src="${ctx}/js/echarts/echarts.min.js?v=${rv}"></script><script>// var myChart1 = echarts.init(document.getElementById('chart1'));// var myChart2 = echarts.init(document.getElementById('chart2'));// var myChart3 = echarts.init(document.getElementById('chart3'));    // $(document).ready(function(){// 	var vm = new Vue({// 		el: '#app',// 		data: {// 			chart1: {// 				subtext: '0/0',// 				data: [//                    {value:0, name:'车辆正常'},//                    {value:0, name:'车辆停止'}//                ]// 			},// 			chart2: {// 				subtext: '0/0',// 				data: [//                    {value:0, name:'正常上班'},//                    {value:0, name:'事故请假'}//                ]// 			},// 			chart3: {// 				obd: [0, 0, 0],// 				adas: [0, 0, 0, 0, 0, 0],// 				dds: [0, 0, 0, 0],// 				obdmax: 100,// 				adasmax: 100,// 				ddsmax: 100// 			}// 		},// 		methods: {// 		    post: function(url, data, callback, errCallback)  {// 		        $.ajax({// 		            type: 'POST',// 		            url: url,// 		            dataType:'json',// 		            // data:JSON.stringify(data),// 		            data: data,// 		            // contentType: "application/json; charset=utf-8",// 		            success: function(data) {// 		                if(data.code != '0') {// 		                    alert(data.msg);// 		                } else {// 		                	callback(data);// 		                }// 		            },// 		            error: function(err){// 		                layer.msg('请求失败，请稍后再试');// 		                if(errCallback) errCallback(err);// 		            }// 		        })// 		    },// 		    getOption1: function() {// 				var option1 = {// //			        title: {// //			            text: '车辆正常',// //			            subtext: vm.chart1.subtext,// //			            left: '42%',// //			            top: "center",// //			            textStyle: {// //			                color: '#304553',// //			                align: 'right'// //			            }// //			        },// 			        tooltip: {// 			            trigger: 'item',// 			            formatter: "{a} <br/>{b}: {c} ({d}%)"//                     },// 			        legend: {// 			            orient: 'vertical',// 			            left: '10',// 			            y: '10',// 			            align: 'right',// 			            data: ['车辆正常', '车辆停止']// 			        },// 			        series: [// 			            {// 			                name:'状态信息',// 			                type:'pie',// 			                radius: ['50%', '70%'],// 			                avoidLabelOverlap: false,// 			                label: {// 			                    normal: {// 			                        show: false,// 			                        position: 'center'// 			                    },// 			                    emphasis: {// 			                        show: true,// 			                        textStyle: {// 			                            fontSize: '19',// 			                            fontWeight: 'bold'// 			                        }// 			                    }// 			                },// 			                labelLine: {// 			                    normal: {// 			                        show: false// 			                    }// 			                },// 			                data: vm.chart1.data// 			            }// 			        ],//                     color:['#2f4554','#c23531']// 			    }// 				return option1;// 		    },// 		    getOption2: function() {// 				var option2 = {// //    		        title: {// //    		            text: '事故请假',// //    		            left: '42%',// //    		            top: "center",// //    		            subtext: vm.chart2.subtext,// //    		            textStyle: {// //    		                color: '#333',// //    		            }// //    		        },//     		        tooltip: {//     		            trigger: 'item',//     		            formatter: "{a} <br/>{b}: {c} ({d}%)"//     		        },//     		        legend: {//     		            orient: 'vertical',//     		            left: '10',//     		            y: '10',//     		            align: 'right',//     		            data: ['正常上班', '事故请假']//     		        },//     		        series: [//     		            {//     		                name:'考勤信息',//     		                type:'pie',//     		                radius: ['50%', '70%'],//     		                avoidLabelOverlap: false,//     		                label: {//     		                    normal: {//     		                        show: false,//     		                        position: 'center'//     		                    },//     		                    emphasis: {//     		                        show: true,//     		                        textStyle: {//     		                            fontSize: '19',//     		                            fontWeight: 'bold'//     		                        }//     		                    }//     		                },//     		                labelLine: {//     		                    normal: {//     		                        show: false//     		                    }//     		                },//     		                data: vm.chart2.data//     		            }//     		        ],//                     color:['#2f4554','#c23531']//     		    };// 				return option2;// 		    },// 		    getOption3: function() {// 				var option3 = {//     		        tooltip : {//     		            trigger: 'axis'//     		        },//     		        legend: {//     		            left: '50',//     		            y: '10',//     		            data:['OBD','DDS','ADAS']//     		        },//     		        toolbox: {//     		            show : false,//     		            feature : {//     		                mark : {show: true},//     		                dataView : {show: true, readOnly: false},//     		                restore : {show: true},//     		                saveAsImage : {show: true}//     		            }//     		        },//     		        calculable : true,//     		        polar : [//     		            {//     		                indicator : [//     		                    {text : '急加速', max : vm.chart3.obdmax},//     		                    {text : '急减速', max : vm.chart3.obdmax},//     		                    {text : '急转弯', max : vm.chart3.obdmax}//     		                ],//     		                center : ['20%','53%'],//     		                radius : '50%'//     		            },//     		            {//     		                indicator : [//     		                    {text : '抽烟', max : vm.chart3.ddsmax},//     		                    {text : '侧脸', max : vm.chart3.ddsmax},//     		                    {text : '低头', max : vm.chart3.ddsmax},//     		                    {text : '打哈欠', max : vm.chart3.ddsmax},//     		                    {text : '闭眼', max : vm.chart3.ddsmax},//     		                    {text : '打手机', max : vm.chart3.ddsmax}//     		                ],//     		                center : ['50%','53%'],//     		                radius : '50%'//     		            },//     		            {//     		                indicator : [//     		                    {text : '左车道偏离', max : vm.chart3.adasmax},//     		                    {text : '右车道偏离', max : vm.chart3.adasmax},//     		                    {text : '前车碰撞', max : vm.chart3.adasmax},//     		                    {text : '行人预警', max : vm.chart3.adasmax}//     		                ],//     		                center : ['80%','53%'],//     		                radius : '50%'//     		            },//     		        ],//     		        series : [//     		            {//     		                type: 'radar',//     		                tooltip : {//     		                    trigger: 'item'//     		                },//     		                itemStyle: {normal: {areaStyle: {type: 'default'}}},//     		                data : [//     		                    {//     		                        value : vm.chart3.obd,//     		                        name : 'OBD'//     		                    }//     		                ]//     		            },//     		            {//     		                type: 'radar',//     		                polarIndex : 1,//     		                tooltip : {//     		                    trigger: 'item'//     		                },//     		                itemStyle: {normal: {areaStyle: {type: 'default'}}},//     		                data : [//     		                    {//     		                        value : vm.chart3.dds,//     		                        name : 'DDS'//     		                    }//     		                ]//     		            },//     		            {//     		                type: 'radar',//     		                polarIndex : 2,//     		                tooltip : {//     		                    trigger: 'item'//     		                },//     		                itemStyle: {normal: {areaStyle: {type: 'default'}}},//     		                data : [//     		                    {//     		                        value : vm.chart3.adas,//     		                        name : 'ADAS'//     		                    }//     		                ]//     		            },//     		        ]//     		    };// 				return option3;// 		    },// 			selectChart1: function() {// 				vm.post('${ctx}/statistics/alarmRadar/car.do', null, function(resp) {// 					vm.chart1 = resp.data;// 					myChart1.setOption(vm.getOption1());// 				});// 			},// 			selectChart2: function() {// 				vm.post('${ctx}/statistics/alarmRadar/driver.do', null, function(resp) {// 					vm.chart2 = resp.data;// 					myChart2.setOption(vm.getOption2());// 				});// 			},// 			selectChart3: function() {// 				vm.post('${ctx}/statistics/alarmRadar/alarm.do', null, function(resp) {// 					vm.chart3 = resp.data;// 					myChart3.setOption(vm.getOption3());// 				});// 			}// 		}// 	});	//     // 使用刚指定的配置项和数据显示图表。//     myChart1.setOption(vm.getOption1());//     myChart2.setOption(vm.getOption2());//     myChart3.setOption(vm.getOption3());//     setTimeout(function (){//         window.onresize = function () {//             myChart1.resize();//             myChart2.resize();//             myChart3.resize();//         }},200);//     vm.selectChart1();//     vm.selectChart2();//     vm.selectChart3();// });</script></html>